<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Game</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: #ffffff;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        #sentence {
            font-size: 1.5em;
            margin: 20px 0;
        }
        input {
            width: 80%;
            padding: 10px;
            font-size: 1.2em;
            margin: 10px 0;
        }
        #timer, #score {
            font-size: 1.5em;
        }
        .badge {
            display: inline-block;
            background-color: #444;
            border-radius: 10px;
            padding: 10px;
            margin: 5px;
        }
        #power-ups {
            margin-top: 20px;
        }
        .power-up {
            display: inline-block;
            margin: 5px;
            padding: 10px;
            background-color: #333;
            border-radius: 5px;
            cursor: pointer;
        }
        .explosion {
            display: none;
            position: absolute;
            width: 50px;
            height: 50px;
            background: radial-gradient(circle, yellow, transparent);
            border-radius: 50%;
            animation: explode 0.5s forwards;
        }
        @keyframes explode {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(3); opacity: 0; }
        }
    </style>
</head>
<body>

<h1>Typing Game</h1>
<div id="sentence">Type this sentence.</div>
<input type="text" id="textInput" placeholder="Start typing..." />
<div id="timer">Time: <span id="timeRemaining">30</span>s</div>
<div id="score">Score: <span id="currentScore">0</span></div>
<div id="achievements"></div>
<div id="power-ups"></div>
<div id="qr-link"><a href="#" id="shareLink">Share this game</a></div>
<div id="signature">Created by: tempestAethel</div>

<div id="explosionEffect" class="explosion"></div>

<script>
    const sentences = [
        "The quick brown fox jumps over the lazy dog.",
        "Typing is a great way to improve your skills.",
        "Practice makes perfect, keep typing!",
        "The rain in Spain stays mainly in the plain.",
        "A journey of a thousand miles begins with a single step."
    ];
    
    let currentSentence = "";
    let score = 0;
    let timer;
    let timeRemaining = 30;
    let achievements = JSON.parse(localStorage.getItem("achievements")) || [];
    
    function startGame() {
        currentSentence = sentences[Math.floor(Math.random() * sentences.length)];
        document.getElementById('sentence').innerText = currentSentence;
        document.getElementById('textInput').value = '';
        score = 0;
        timeRemaining = 30;
        document.getElementById('currentScore').innerText = score;
        document.getElementById('timeRemaining').innerText = timeRemaining;
        startTimer();
        document.getElementById('textInput').focus();
        resetPowerUps();
        updateAchievementsDisplay();
    }

    function startTimer() {
        timer = setInterval(() => {
            timeRemaining--;
            document.getElementById('timeRemaining').innerText = timeRemaining;
            if (timeRemaining <= 0) {
                clearInterval(timer);
                alert(`Game Over! Your score: ${score}`);
                checkAchievements();
            }
        }, 1000);
    }

    document.getElementById('textInput').addEventListener('input', function() {
        let inputText = this.value;
        inputText = inputText.replace(/[^a-zA-Z0-9\s.,?!]/g, ''); // Input Validation
        this.value = inputText;

        if (inputText === currentSentence) {
            score += inputText.length; // Correct characters
            document.getElementById('currentScore').innerText = score;
            createExplosion(); // Visual feedback
            alert("Well done! Next sentence...");
            startGame();
        }
    });

    function createExplosion() {
        const explosion = document.getElementById('explosionEffect');
        explosion.style.left = Math.random() * window.innerWidth + 'px';
        explosion.style.top = Math.random() * window.innerHeight + 'px';
        explosion.style.display = 'block';
        setTimeout(() => explosion.style.display = 'none', 500);
    }

    function checkAchievements() {
        if (score >= 100 && !achievements.includes("Typed 100 Characters")) {
            achievements.push("Typed 100 Characters");
            updateAchievementsDisplay();
        }
        localStorage.setItem("achievements", JSON.stringify(achievements));
    }

    function updateAchievementsDisplay() {
        const achievementsDiv = document.getElementById('achievements');
        achievementsDiv.innerHTML = achievements.map(a => `<div class="badge">${a}</div>`).join('');
    }

    function resetPowerUps() {
        document.getElementById('power-ups').innerHTML = '';
        generatePowerUps();
    }

    function generatePowerUps() {
        const powerUps = ["Shield", "Slow Time", "Double Points"];
        powerUps.forEach(power => {
            const powerUpDiv = document.createElement('div');
            powerUpDiv.className = 'power-up';
            powerUpDiv.innerText = power;
            powerUpDiv.onclick = () => activatePowerUp(power);
            document.getElementById('power-ups').appendChild(powerUpDiv);
        });
    }

    function activatePowerUp(power) {
        alert(`Activated: ${power}`);
        // Implement power-up effects (basic example)
        switch (power) {
            case "Shield":
                // Prevent character loss for a short period
                break;
            case "Slow Time":
                // Pause the timer
                clearInterval(timer);
                break;
            case "Double Points":
                // Double the points for a limited time
                break;
        }
    }

    document.getElementById('shareLink').onclick = function() {
        alert("Share this game link!");
    };

    startGame(); // Initialize game on load
</script>

</body>
</html>
